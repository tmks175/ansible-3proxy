## Ansible 3proxy Deployment
Установка и базовая настройка **3proxy** (socks5) из исходников на Debian 12 с использованием Ansible playbook.

### Tasks
- обновление системы;
- установка зависимостей для сборки;
- настройка часового пояса;
- отключение IPv6 и включение IP forwarding;
- скачивание, распаковка и компиляция 3proxy из официального [GitHub-репозитория;](https://github.com/3proxy/3proxy/releases)
- генерация и размещение конфигурационного файла из шаблона (порт и учетные данные);
- установка и активация стандартного systemd-unit;
- копирование в `/etc/` скрипта для настройки iptables
  *(не выполняется автоматически во избежание некорректной конфигурации и потери SSH-доступа).*

### Usage
1. Переименовать `inventory.example.ini` в `inventory.ini`, указать параметры для подключения к целевому серверу в нужном вам формате (текущий вариант - только **для примера**).
2. *(Опционально)* Проверить доступность сервера:
`cd /ansible-3proxy`
`ansible -i inventory.ini proxies -m ping`
3. Указать `binding address` в шаблоне: `/ansible-3proxy/templates/3proxy.cfg.j2`
3. Запустить playbook
`ansible-playbook -i inventory.ini playbook.yml`
4. Проверить статус службы на целевом сервере:
`systemctl status 3proxy`
5. Порт и учетные данные для подключения находятся в директории *(генерируются автоматически в процессе выполнения playbook; при повторном запуске - не изменяются):*
`/etc/3proxy/3proxy.cfg`

---

### Note
В целях безопасности - настройка firewall **не** автоматизирована.

В репозитории размещена "заглушка" `iptables.sh`
Я использую [один из вариантов](https://github.com/tmks175/iptables-fw-config) конфигурации для неё.

(!) Перед применением следует адаптировать скрипт/правила под свою инфраструктуру.
Для автоматического сохранения и восстановления правил после перезагрузки сервера, рекомендуется установить пакет: `iptables-persistent`

---

**Опционально:** версию 3proxy и часовой пояс можно изменить в переменной `vars` - `/ansible-3proxy/playbook.yml`
